<!DOCTYPE html>
<html data-ng-app="budgetApp" lang="en">
  <head>  
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta content="" name="description">

    <title>Budget Application</title>

    <!-- Favicon -->
    <!--[if IE]><link rel="shortcut icon" href="path/to/favicon.ico"><![endif]-->
    <link rel="icon" type="image/png" href="">
    <!-- end Favicon -->       
    
    <link src="//normalize-css.googlecode.com/svn/trunk/normalize.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="budget/css/jquery-ui-1-11-4.min.css" rel="stylesheet">
    <link href="budget/css/main.css" rel="stylesheet">
    <link href="budget/css/budget.css" rel="stylesheet"><!-- Loading separate stylesheet for budget app styles to keep better track of new custom styles -->
    
    <script src="//code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="budget/js/vendor/jquery-ui-1.11.4.min.js"></script>
    <script src="//code.angularjs.org/1.5.3/angular.min.js"></script>
    <script src="//code.angularjs.org/1.5.3/angular-animate.min.js"></script>
    <script src="budget/js/vendor/ui-bootstrap-tpls-1.3.1.min.js"></script>
    
  </head>
  <body data-ng-controller="budgetController">
  
    <main class="budget">
    
      <header class="clearfix">
        <h1>Personal Budget</h1>  
        <p>I've never been good at creating and following a personal budget. On the rare occasions I tried to budget, any free software I could find was all based on Excel spreadsheets. I hate spreadsheets. There's just something about them that I find inelegant. So, I decided to create this simple budget application to get away from spreadsheets, try to budget better and learn more development tricks along the way. I do realize that, in its current form, this app is little better than a spreadsheet, but it's a work-in-progress.</p>
        <table class="summary-table" data-ng-init="calculateExpenses()">
          <tr>
            <td>Available Funds</td>
            <td>{{ totalIncome | currency }}</td>
          </tr>
          <tr>
            <td>Expenses</td>
            <td>{{ totalExpenses | currency }}</td>
          </tr>
          <tr>
            <td>Remaining</td>
            <td data-ng-class="remainingFunds < 0 ? 'bold red' : ''">{{ remainingFunds | currency }}</td>
          </tr>
        </table>
      </header>

      <div id="tabs">
        <ul>
          <li><a href="#income">Income</a></li>
          <li><a href="#expenses">Expenses</a></li>
          <li><a href="#report">Report</a></li>
        </ul>

        <!-- Income Tab -->
        <div id="income">

          <h2>Add Money</h2>

          <form class="add-entry">
            <input class="entry-date" type="text" data-ng-model="date" placeholder="Date" datepicker readonly="true">
            <select class="entry-category" data-ng-model="selectedCategory" data-ng-options="incomeCategory.name group by incomeCategory.group for incomeCategory in ledgerCategories.incomeCategories | orderBy: ['group', 'name']">
              <option value="" disabled>-- Income Category --</option>
            </select>
            <input class="entry-payee-source" type="text" data-ng-model="payeeSource" placeholder="Source">
            <input class="entry-amount" type="number" min="0" step="0.01" data-ng-model="amount" placeholder="Amount">
            <button data-ng-click="newLedgerEntry('income')">Add</button>
          </form> 

          <div class="mobile-table">
            <span class="mobile-table-caption">Tap/Click on a row to edit the entry</span>
            <div class="mobile-table-row" data-ng-repeat="income in ledger[1] | orderBy: 'date'">
              
              <span class="entry-date" data-ng-if="income.date">{{ income.date | date:'MM/dd/yyyy' }}</span>
              <span class="entry-date" data-ng-if="!income.date"><em>No Date</em></span>
              
              <span class="entry-payee-source" data-ng-if="income.payeeSource">{{ income.payeeSource }}</span>
              <span class="entry-payee-source" data-ng-if="!income.payeeSource"><em>No Source</em></span>
              
              <span class="entry-amount">{{ income.amount | currency}}</span>
              
            </div>
          </div>

          <table class="budget-table">
            <tr>
              <th class="entry-date">Income Date</th>
              <th class="entry-category">Category</th>
              <th class="entry-payee-source">Source</th>
              <th class="entry-amount">Amount</th>
              <th class="add-edit-entry">Edit</th>
            </tr>
            
            <tr data-ng-repeat="income in ledger[1] | orderBy: 'date'">
              
              <td class="entry-date" data-ng-if="income.date">{{ income.date | date:'MM/dd/yyyy' }}</td>
              <td class="entry-date" data-ng-if="!income.date"><em>No Date Entered</em></td>
              
              <td class="entry-category" data-ng-if="income.category.name">{{ income.category.name }}</td>
              <td class="entry-category" data-ng-if="!income.category.name"><em>No Category</em></td>
              
              <td class="entry-payee-source" data-ng-if="income.payeeSource">{{ income.payeeSource }}</td>
              <td class="entry-payee-source" data-ng-if="!income.payeeSource"><em>No Source</em></td>
              
              <td class="entry-amount">{{ income.amount | currency}}</td>
              <td class="add-edit-entry">
                <button title="Edit">Edit</button>
                <button data-ng-click="removeLedgerEntry('income', income.ledgerId)">Delete</button>
              </td>
            </tr>
            
          </table>

        </div>

        <!-- Expenses Tab -->
        <div id="expenses">
          <h2>Add Expense</h2>

          <form class="add-entry">
            <input class="entry-date" type="text" data-ng-model="date" placeholder="Date" datepicker readonly="true">
            <select class="entry-category" data-ng-model="selectedCategory" data-ng-options="expenseCategory.name group by expenseCategory.group for expenseCategory in ledgerCategories.expenseCategories | orderBy: ['group', 'name']">
              <option value="" disabled>-- Expense Category --</option>
            </select>
            <input class="entry-payee-source" type="text" data-ng-model="payeeSource" placeholder="Payee">
            <input class="entry-amount" type="number" min="0" step="0.01" data-ng-model="amount" placeholder="Amount">
            <button data-ng-click="newLedgerEntry('expense')">Add</button>
          </form>  

          <div class="mobile-table">
            <span class="mobile-table-caption">Tap/Click on a row to edit the entry</span>
            <div class="mobile-table-row" data-ng-click="openModal('expense', expense.ledgerId)" data-ng-repeat="expense in ledger[0] | orderBy: 'date'">
              
              <span class="entry-date" data-ng-if="expense.date">{{ expense.date | date:'MM/dd/yyyy' }}</span>
              <span class="entry-date" data-ng-if="!expense.date"><em>No Date</em></span>
              
              <span class="entry-payee-source" data-ng-if="expense.payeeSource">{{ expense.payeeSource }}</span>
              <span class="entry-payee-source" data-ng-if="!expense.payeeSource"><em>No Payee</em></span>
              
              <span class="entry-amount">{{ expense.amount | currency}}</span>
            </div>
          </div>

          <table class="budget-table">
            <tr>
              <th class="entry-date">Payment Date</th>
              <th class="entry-category">Category</th>
              <th class="entry-payee-source">Payee</th>
              <th class="entry-amount">Amount</th>
              <th class="add-edit-entry">Edit</th>
            </tr>
            <tr data-ng-repeat="expense in ledger[0] | orderBy: 'date'">  
              <td class="entry-date" data-ng-if="expense.date">{{ expense.date | date:'MM/dd/yyyy' }}</td>
              <td class="entry-date" data-ng-if="!expense.date"><em>No Date</em></td>
              
              <td class="entry-category" data-ng-if="expense.category.name">{{ expense.category.name }}</td>
              <td class="entry-category" data-ng-if="!expense.category.name"><em>No Category</em></td>
              
              <td class="entry-payee-source" data-ng-if="expense.payeeSource">{{ expense.payeeSource }}</td>
              <td class="entry-payee-source" data-ng-if="!expense.payeeSource"><em>No Payee</em></td>
              
              <td class="entry-amount">{{ expense.amount | currency}}</td>
              <td class="add-edit-entry">
                <button title="Edit">Edit</button>
                <button data-ng-click="removeLedgerEntry('expense', expense.ledgerId)" title="Delete">Delete</button>
              </td>
            </tr>
          </table>

        </div>

        <!-- Budget Report Tab -->
        <div id="report">
          <h2>Budget Report</h2>
          
          <div class="mobile-table">

            <div class="mobile-table-row" data-ng-repeat="income in ledger[1] | orderBy: 'date'">
              <span class="entry-type green bold">+$</span>
              <span class="entry-date" data-ng-if="income.date">{{ income.date | date:'M/d/yy' }}</span>
              <span class="entry-date" data-ng-if="!income.date"><em>No Date</em></span>
              
              <span class="entry-payee-source" data-ng-if="income.payeeSource">{{ income.payeeSource }}</span>
              <span class="entry-payee-source" data-ng-if="!income.payeeSource"><em>No Source</em></span>
              
              <span class="entry-amount">{{ income.amount | currency}}</span>
            </div>

            <div class="mobile-table-row" data-ng-repeat="expense in ledger[0] | orderBy: 'date'">
              <span class="entry-type red bold">-$</span>
              <span class="entry-date" data-ng-if="expense.date">{{ expense.date | date:'M/d/yy' }}</span>
              <span class="entry-date" data-ng-if="!expense.date"><em>No Date</em></span>
              
              <span class="entry-payee-source" data-ng-if="expense.payeeSource">{{ expense.payeeSource }}</span>
              <span class="entry-payee-source" data-ng-if="!expense.payeeSource"><em>No Payee</em></span>
              
              <span class="entry-amount">{{ expense.amount | currency}}</span>
            </div>

          </div>

          <table class="budget-table report">
            <tr>
              <th class="entry-type">Entry Type</th>
              <th class="entry-date">Payment Date</th>
              <th class="entry-category">Category</th>
              <th class="entry-payee-source">Payee</th>
              <th class="entry-amount">Amount</th>
            </tr>
            
            <tr data-ng-repeat="income in ledger[1] | orderBy: 'date'">
              <td class="entry-type">Income</td>
              <td class="entry-date" data-ng-if="income.date">{{ income.date | date:'MM/dd/yyyy' }}</td>
              <td class="entry-date" data-ng-if="!income.date"><em>No Date</em></td>
              
              <td class="entry-category" data-ng-if="income.category.name">{{ income.category.name }}</td>
              <td class="entry-category" data-ng-if="!income.category.name"><em>No Date</em></td>
              
              <td class="entry-payee-source" data-ng-if="income.payeeSource">{{ income.payeeSource }}</td>
              <td class="entry-payee-source" data-ng-if="!income.payeeSource"><em>No Source</em></td>
              
              <td class="entry-amount">{{ income.amount | currency}}</td>
            </tr>

            <tr data-ng-repeat="expense in ledger[0] | orderBy: 'date'">  
              <td class="entry-type">Expense</td>
              
              <td class="entry-date" data-ng-if="expense.date">{{ expense.date | date:'MM/dd/yyyy' }}</td>
              <td class="entry-date" data-ng-if="!expense.date"><em>No Date</em></td>
              
              <td class="entry-category" data-ng-if="expense.category.name">{{ expense.category.name }}</td>
              <td class="entry-category" data-ng-if="!expense.category.name"><em>No Category</em></td>
              
              <td class="entry-payee-source" data-ng-if="expense.payeeSource">{{ expense.payeeSource }}</td>
              <td class="entry-payee-source" data-ng-if="!expense.payeeSource"><em>No Payee</em></td>
              
              <td class="entry-amount">{{ expense.amount | currency}}</td>
            </tr>

          </table>
          
          <button data-ng-click="printReport()">Print Report</button>
          
        </div>

      </div>
    
    </main>

    <!-- App -->
    <script src="budget/js/app.js"></script>

    <!-- Controllers -->
    <script src="budget/js/controllers/budgetController.js"></script>

    <!-- Directives -->
    
    <!-- Factories -->  
    <script src="budget/js/factories/catFactory.js"></script>
    
    <!-- Services -->

  </body>
</html>
